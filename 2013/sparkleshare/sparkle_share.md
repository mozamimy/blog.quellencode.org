[アイキャッチ]

**SparkleShare**

長らくDropboxを利用してきたが、ファイルを自分のコントロール下に置けないことに不安を感じるようになってきた。  
また、できる限りはオープンソースのものを使いたい、という信条からもDropboxはポイすべきだと感じていた。

gitなどのバージョン管理ツールを使えば良いという意見もあるかもしれない。だが、ソースコードならともかく、研究やら写真やらその他諸々の雑多なファイルの管理のために、いちいちgitコマンドを叩くのも面倒くさい。  
私は生来面倒くさがりなのだ。

そんなお悩みを解決してくれるのが、gitをベースとしたSparkleShareだ。  
Dropboxを窓からdropして2週間ほど経ったので、導入すべきか悩む諸氏のために思うところを書き残すことにした。

**メリット**

- ファイルを完全にコントロールできるので安心
- gitベースなのでトラブルシューティングが容易
- クライアントのソースコードがオープンなので、何かあっても自分で原因究明やメンテができる

**デメリット**

- ファイルを保存するたびにgitがぶん回るので、バッテリーにやさしくない
- サーバ上では、ファイルはgitのベアリポジトリで管理されるため、ファイルという形でのバックアップはとれない

以上、Dropboxと比較してメリットとデメリットを挙げてみた。  
このブログの読者ならgitやC#に親しいだろう、という仮定をおいているが。

CPUパワーを浪費するのは、gitを使っている以上仕方ないと思い許容している。  
そのため、MacBook Airをバッテリーで駆動させるときはSparkleShareのプロセスを終了させている。  
もっとも、そのようなシチュエーションでは、たいていテザリング回線を使っているのでこれは問題ない。

**環境**

わたしは、以下の4台のマシンを使っている。

- さくらのVPS（openSUSE 13.1/リモートリポジトリ）
- デスクトップマシン1（openSUSE 13.1/普段使い用）
- デスクトップマシン2（openSUSE 13.1/バックアップ用）
- MacBook Air（OS X 10.9/普段使い用）

さくらのVPSに入れたLinuxサーバをリモートリポジトリとして使い、デスクトップマシン1とMacBook AirにSparkleShareのクライアントを導入した。  
リモートマシンにはsshで接続できる環境と、gitさえあればよいのでSparkleShare自体は不要だ。  
ちなみに、openSUSEならzypperで簡単にクライアントプログラムをインストールできる。Ubuntuなどの著名なディストリにもパッケージは用意されているだろう。OS Xなら公式ページからダウンロードすればよい。

デスクトップマシン2はバックアップ用で、cronでリモートリポジトリから1分おきにgit pullしている。  
そのおかげで、ファイルという形でバックアップがとれるので安心感が増すというわけだ。

これだけ分散させておけば、さすがに全データを失うような大事故は防げるだろう。  
少なくとも、さくらのVPSのデータセンターが石狩湾に沈んで、自宅のコンピュータが瓦礫に埋もれて、肌身離さず持ち歩いているMacBook Airが地上十数メートルの研究室から飛んでいくという3つの不幸が同時に起こらない限りは。